(()=>{"use strict";const e=window.wp.plugins,t=window.wp.element,o=window.wp.components,n=window.wp.compose,r=window.wp.data,l=window.wp.editor;function a({color:e,updateColor:n,label:r}){const[l,a]=(0,t.useState)(null),[i,s]=(0,t.useState)(!1);return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("button",{ref:a,onClick:()=>s((e=>!e)),style:{minHeight:40,textAlign:"left",display:"flex",alignItems:"center",appearance:"none",background:"transparent",border:"1px solid #ccc",gap:".5rem",padding:".25rem",borderRadius:".25rem",width:"100%",color:"#363F53"}},(0,t.createElement)("span",{style:{width:"max-content",aspectRatio:1}},(0,t.createElement)(o.ColorIndicator,{colorValue:e})),(0,t.createElement)("span",null,r)),i&&(0,t.createElement)(o.Popover,{anchor:l,onFocusOutside:()=>s(!1),placement:"left-start",offset:10,resize:!0,shift:!0,onClose:()=>s(!1),noArrow:!1,headerTitle:`Setting ${r}'s Color`},(0,t.createElement)("div",{style:{padding:".25rem"}},(0,t.createElement)(o.ColorPicker,{color:e,onChange:e=>{n(e)}}))))}const i=(0,n.compose)((0,r.withSelect)((e=>{const t=e("core/editor").getEditedPostAttribute("meta"),o=e("core/editor").getCurrentPostAttribute("meta");return console.log(e("core/editor").getCurrentPostAttribute("meta")),{meta:{...o,...t}}})),(0,r.withDispatch)((e=>({setMeta:(t,o)=>e("core/editor").editPost({meta:{[o]:t}})}))))((function({meta:e,setMeta:n}){const{membergate_overlay_settings:r}=e;console.log({meta:e});const i=(0,t.useCallback)(((e,t)=>{n({...r,[e]:t},"membergate_overlay_settings")}),[r]);return(0,t.useEffect)((()=>{console.log({settings:r})}),[r]),(0,t.useEffect)((()=>{!function(e){const t=document.querySelector(".block-editor-block-list__layout");t&&(t.style.setProperty("--membergate-overlay-maxWidth",e.maxWidth),t.style.setProperty("--membergate-overlay-position",e.position))}(r||{})}),[r]),(0,t.createElement)(l.PluginDocumentSettingPanel,{className:"membergate-overlay-settings",title:"Overlay Settings",name:"overlay-settings",isOpen:!0},r&&(0,t.createElement)("div",null,Object.entries(r).map((([e,n])=>"padding"===e?null:e.includes("Color")?(0,t.createElement)(a,{color:n,updateColor:t=>i(e,t),label:e}):(0,t.createElement)("div",null,(0,t.createElement)(o.__experimentalNumberControl,{value:n.split("px")[0],onChange:t=>i(e,t.toString()+"px"),label:e}))))))}));setTimeout((()=>{console.log("hi",wp.data.select("core/editor").getCurrentPostAttribute("meta"))}),1e4),(0,e.registerPlugin)("membergate-overlay-settings",{render:i})})();